import { dereference } from "./dereference.js";
import { validate } from "./validate.js";
export class Validator {
    schema;
    draft;
    shortCircuit;
    lookup;
    constructor(schema, draft = "2019-09", shortCircuit = true) {
        this.schema = schema;
        this.draft = draft;
        this.shortCircuit = shortCircuit;
        this.lookup = dereference(schema);
    }
    validate(instance) {
        return validate(instance, this.schema, this.draft, this.lookup, this.shortCircuit);
    }
    addSchema(schema, id) {
        if (id) {
            schema = { ...schema, $id: id };
        }
        dereference(schema, this.lookup);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidmFsaWRhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUUvQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXpDLE1BQU0sT0FBTyxTQUFTO0lBSUg7SUFDQTtJQUNBO0lBTEQsTUFBTSxDQUFpQztJQUV4RCxZQUNrQixNQUF3QixFQUN4QixRQUFxQixTQUFTLEVBQzlCLGVBQWUsSUFBSTtRQUZuQixXQUFNLEdBQU4sTUFBTSxDQUFrQjtRQUN4QixVQUFLLEdBQUwsS0FBSyxDQUF5QjtRQUM5QixpQkFBWSxHQUFaLFlBQVksQ0FBTztRQUVwQyxJQUFJLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRU0sUUFBUSxDQUFDLFFBQWE7UUFDNUIsT0FBTyxRQUFRLENBQ2QsUUFBUSxFQUNSLElBQUksQ0FBQyxNQUFNLEVBQ1gsSUFBSSxDQUFDLEtBQUssRUFDVixJQUFJLENBQUMsTUFBTSxFQUNYLElBQUksQ0FBQyxZQUFZLENBQ2pCLENBQUM7SUFDSCxDQUFDO0lBRU0sU0FBUyxDQUFDLE1BQWMsRUFBRSxFQUFXO1FBQzNDLElBQUksRUFBRSxFQUFFO1lBQ1AsTUFBTSxHQUFHLEVBQUUsR0FBRyxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQ2hDO1FBQ0QsV0FBVyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEMsQ0FBQztDQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVyZWZlcmVuY2UgfSBmcm9tIFwiLi9kZXJlZmVyZW5jZS50c1wiO1xuaW1wb3J0IHsgU2NoZW1hLCBTY2hlbWFEcmFmdCB9IGZyb20gXCIuL3R5cGVzLnRzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gXCIuL3ZhbGlkYXRlLnRzXCI7XG5cbmV4cG9ydCBjbGFzcyBWYWxpZGF0b3Ige1xuXHRwcml2YXRlIHJlYWRvbmx5IGxvb2t1cDogUmV0dXJuVHlwZTx0eXBlb2YgZGVyZWZlcmVuY2U+O1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgc2NoZW1hOiBTY2hlbWEgfCBib29sZWFuLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZHJhZnQ6IFNjaGVtYURyYWZ0ID0gXCIyMDE5LTA5XCIsXG5cdFx0cHJpdmF0ZSByZWFkb25seSBzaG9ydENpcmN1aXQgPSB0cnVlLFxuXHQpIHtcblx0XHR0aGlzLmxvb2t1cCA9IGRlcmVmZXJlbmNlKHNjaGVtYSk7XG5cdH1cblxuXHRwdWJsaWMgdmFsaWRhdGUoaW5zdGFuY2U6IGFueSkge1xuXHRcdHJldHVybiB2YWxpZGF0ZShcblx0XHRcdGluc3RhbmNlLFxuXHRcdFx0dGhpcy5zY2hlbWEsXG5cdFx0XHR0aGlzLmRyYWZ0LFxuXHRcdFx0dGhpcy5sb29rdXAsXG5cdFx0XHR0aGlzLnNob3J0Q2lyY3VpdCxcblx0XHQpO1xuXHR9XG5cblx0cHVibGljIGFkZFNjaGVtYShzY2hlbWE6IFNjaGVtYSwgaWQ/OiBzdHJpbmcpIHtcblx0XHRpZiAoaWQpIHtcblx0XHRcdHNjaGVtYSA9IHsgLi4uc2NoZW1hLCAkaWQ6IGlkIH07XG5cdFx0fVxuXHRcdGRlcmVmZXJlbmNlKHNjaGVtYSwgdGhpcy5sb29rdXApO1xuXHR9XG59XG4iXX0=
