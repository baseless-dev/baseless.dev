function refToRegExp(ref) {
    return new RegExp(`^${ref.replace(/:([\w]+)/g, "(?<$1>[^/]+)")}$`);
}
export var DatabasePermissions;
(function (DatabasePermissions) {
    DatabasePermissions[DatabasePermissions["None"] = 0] = "None";
    DatabasePermissions[DatabasePermissions["List"] = 1] = "List";
    DatabasePermissions[DatabasePermissions["Get"] = 2] = "Get";
    DatabasePermissions[DatabasePermissions["Create"] = 4] = "Create";
    DatabasePermissions[DatabasePermissions["Update"] = 8] = "Update";
    DatabasePermissions[DatabasePermissions["Delete"] = 16] = "Delete";
    DatabasePermissions[DatabasePermissions["Subscribe"] = 32] = "Subscribe";
})(DatabasePermissions || (DatabasePermissions = {}));
export class DatabaseBuilder {
    collections = new Set();
    documents = new Set();
    build() {
        return {
            collections: Array.from(this.collections).map((b) => b.build()),
            documents: Array.from(this.documents).map((b) => b.build()),
        };
    }
    collection(reference) {
        const builder = new DatabaseCollectionBuilder(reference);
        this.collections.add(builder);
        return builder;
    }
    document(reference) {
        const builder = new DatabaseDocumentBuilder(reference);
        this.documents.add(builder);
        return builder;
    }
}
export class DatabaseCollectionBuilder {
    ref;
    onCreateHandler;
    permissionHandler;
    constructor(ref) {
        this.ref = ref;
    }
    build() {
        return {
            ref: this.ref,
            matcher: refToRegExp(this.ref),
            onCreate: this.onCreateHandler,
            permission: this.permissionHandler,
        };
    }
    onCreate(handler) {
        this.onCreateHandler = handler;
        return this;
    }
    permission(handler) {
        this.permissionHandler = handler;
        return this;
    }
}
export class DatabaseDocumentBuilder {
    ref;
    onUpdateHandler;
    onDeleteHandler;
    permissionHandler;
    constructor(ref) {
        this.ref = ref;
    }
    build() {
        return {
            ref: this.ref,
            matcher: refToRegExp(this.ref),
            onUpdate: this.onUpdateHandler,
            onDelete: this.onDeleteHandler,
            permission: this.permissionHandler,
        };
    }
    onUpdate(handler) {
        this.onUpdateHandler = handler;
        return this;
    }
    onDelete(handler) {
        this.onDeleteHandler = handler;
        return this;
    }
    permission(handler) {
        this.permissionHandler = handler;
        return this;
    }
}
export const database = new DatabaseBuilder();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWJhc2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRhYmFzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxTQUFTLFdBQVcsQ0FBQyxHQUFXO0lBQy9CLE9BQU8sSUFBSSxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDcEUsQ0FBQztBQUtELE1BQU0sQ0FBTixJQUFZLG1CQVFYO0FBUkQsV0FBWSxtQkFBbUI7SUFDOUIsNkRBQVEsQ0FBQTtJQUNSLDZEQUFRLENBQUE7SUFDUiwyREFBTyxDQUFBO0lBQ1AsaUVBQVUsQ0FBQTtJQUNWLGlFQUFVLENBQUE7SUFDVixrRUFBVyxDQUFBO0lBQ1gsd0VBQWMsQ0FBQTtBQUNmLENBQUMsRUFSVyxtQkFBbUIsS0FBbkIsbUJBQW1CLFFBUTlCO0FBaUZELE1BQU0sT0FBTyxlQUFlO0lBQ25CLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFBNkIsQ0FBQztJQUNuRCxTQUFTLEdBQUcsSUFBSSxHQUFHLEVBQTJCLENBQUM7SUFLaEQsS0FBSztRQUNYLE9BQU87WUFDTixXQUFXLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDL0QsU0FBUyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQzNELENBQUM7SUFDSCxDQUFDO0lBS00sVUFBVSxDQUFDLFNBQWlCO1FBQ2xDLE1BQU0sT0FBTyxHQUFHLElBQUkseUJBQXlCLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDekQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDOUIsT0FBTyxPQUFPLENBQUM7SUFDaEIsQ0FBQztJQUtNLFFBQVEsQ0FBQyxTQUFpQjtRQUNoQyxNQUFNLE9BQU8sR0FBRyxJQUFJLHVCQUF1QixDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3ZELElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzVCLE9BQU8sT0FBTyxDQUFDO0lBQ2hCLENBQUM7Q0FDRDtBQUtELE1BQU0sT0FBTyx5QkFBeUI7SUFPVjtJQU5uQixlQUFlLENBQTJDO0lBQzFELGlCQUFpQixDQUE2QjtJQUt0RCxZQUEyQixHQUFXO1FBQVgsUUFBRyxHQUFILEdBQUcsQ0FBUTtJQUFHLENBQUM7SUFLbkMsS0FBSztRQUNYLE9BQU87WUFDTixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7WUFDYixPQUFPLEVBQUUsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7WUFDOUIsUUFBUSxFQUFFLElBQUksQ0FBQyxlQUFlO1lBQzlCLFVBQVUsRUFBRSxJQUFJLENBQUMsaUJBQWlCO1NBQ2xDLENBQUM7SUFDSCxDQUFDO0lBS00sUUFBUSxDQUFDLE9BQWtEO1FBQ2pFLElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDO1FBQy9CLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUtNLFVBQVUsQ0FBQyxPQUFrQztRQUNuRCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxDQUFDO1FBQ2pDLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztDQUNEO0FBS0QsTUFBTSxPQUFPLHVCQUF1QjtJQVFSO0lBUG5CLGVBQWUsQ0FBaUQ7SUFDaEUsZUFBZSxDQUEyQztJQUMxRCxpQkFBaUIsQ0FBNkI7SUFLdEQsWUFBMkIsR0FBVztRQUFYLFFBQUcsR0FBSCxHQUFHLENBQVE7SUFBRyxDQUFDO0lBS25DLEtBQUs7UUFDWCxPQUFPO1lBQ04sR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO1lBQ2IsT0FBTyxFQUFFLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQzlCLFFBQVEsRUFBRSxJQUFJLENBQUMsZUFBZTtZQUM5QixRQUFRLEVBQUUsSUFBSSxDQUFDLGVBQWU7WUFDOUIsVUFBVSxFQUFFLElBQUksQ0FBQyxpQkFBaUI7U0FDbEMsQ0FBQztJQUNILENBQUM7SUFLTSxRQUFRLENBQUMsT0FBc0Q7UUFDckUsSUFBSSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUM7UUFDL0IsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBS00sUUFBUSxDQUFDLE9BQWdEO1FBQy9ELElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDO1FBQy9CLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUtNLFVBQVUsQ0FBQyxPQUFrQztRQUNuRCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxDQUFDO1FBQ2pDLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztDQUNEO0FBRUQsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLElBQUksZUFBZSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJRG9jdW1lbnQgfSBmcm9tIFwiaHR0cHM6Ly9iYXNlbGVzcy5kZXYveC9wcm92aWRlci9kYXRhYmFzZS50c1wiO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gXCJodHRwczovL2Jhc2VsZXNzLmRldi94L3Byb3ZpZGVyL2NvbnRleHQudHNcIjtcblxuZnVuY3Rpb24gcmVmVG9SZWdFeHAocmVmOiBzdHJpbmcpIHtcblx0cmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZi5yZXBsYWNlKC86KFtcXHddKykvZywgXCIoPzwkMT5bXi9dKylcIil9JGApO1xufVxuXG4vKipcbiAqIERhdGFiYXNlIHBlcm1pc3Npb25cbiAqL1xuZXhwb3J0IGVudW0gRGF0YWJhc2VQZXJtaXNzaW9ucyB7XG5cdE5vbmUgPSAwLFxuXHRMaXN0ID0gMSxcblx0R2V0ID0gMixcblx0Q3JlYXRlID0gNCxcblx0VXBkYXRlID0gOCxcblx0RGVsZXRlID0gMTYsXG5cdFN1YnNjcmliZSA9IDMyLFxufVxuXG4vKipcbiAqIERvY3VtZW50IGNoYW5nZXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRG9jdW1lbnRDaGFuZ2U8TWV0YWRhdGEsIERhdGE+IHtcblx0LyoqXG5cdCAqIFByZXZpb3VzIGRhdGEgYmVmb3JlIHRoZSBjaGFuZ2VzXG5cdCAqL1xuXHRiZWZvcmU6IElEb2N1bWVudDxNZXRhZGF0YSwgRGF0YT47XG5cblx0LyoqXG5cdCAqIEFjdHVhbGl6ZWQgZGF0YSBhZnRlciB0aGUgY2hhbmdlc1xuXHQgKi9cblx0YWZ0ZXI6IElEb2N1bWVudDxNZXRhZGF0YSwgRGF0YT47XG59XG5cbi8qKlxuICogRGF0YWJhc2UgZG9jdW1lbnQgaGFuZGxlclxuICovXG5leHBvcnQgdHlwZSBEYXRhYmFzZURvY3VtZW50SGFuZGxlcjxNZXRhZGF0YSwgRGF0YT4gPSAoXG5cdGN0eDogQ29udGV4dCxcblx0ZG9jOiBJRG9jdW1lbnQ8TWV0YWRhdGEsIERhdGE+LFxuXHRwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG4pID0+IFByb21pc2U8dm9pZD47XG5cbi8qKlxuICogRGF0YWJhc2UgZG9jdW1lbnQgY2hhbmdlIGhhbmRsZXJcbiAqL1xuZXhwb3J0IHR5cGUgRGF0YWJhc2VEb2N1bWVudENoYW5nZUhhbmRsZXI8TWV0YWRhdGEsIERhdGE+ID0gKFxuXHRjdHg6IENvbnRleHQsXG5cdGNoYW5nZTogSURvY3VtZW50Q2hhbmdlPE1ldGFkYXRhLCBEYXRhPixcblx0cGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4vKipcbiAqIERhdGFiYXNlIHBlcm1pc3Npb24gaGFuZGxlclxuICovXG5leHBvcnQgdHlwZSBEYXRhYmFzZVBlcm1pc3Npb25IYW5kbGVyID1cblx0fCBEYXRhYmFzZVBlcm1pc3Npb25zXG5cdHwgKChcblx0XHRjdHg6IENvbnRleHQsXG5cdFx0cGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuXHQpID0+IFByb21pc2U8RGF0YWJhc2VQZXJtaXNzaW9ucz4pO1xuXG4vKipcbiAqIERhdGFiYXNlIGRlc2NyaXB0b3JcbiAqL1xuZXhwb3J0IHR5cGUgRGF0YWJhc2VEZXNjcmlwdG9yID0ge1xuXHRyZWFkb25seSBjb2xsZWN0aW9uczogUmVhZG9ubHlBcnJheTxcblx0XHREYXRhYmFzZUNvbGxlY3Rpb25EZXNjcmlwdG9yPHVua25vd24sIHVua25vd24+XG5cdD47XG5cdHJlYWRvbmx5IGRvY3VtZW50czogUmVhZG9ubHlBcnJheTxcblx0XHREYXRhYmFzZURvY3VtZW50RGVzY3JpcHRvcjx1bmtub3duLCB1bmtub3duPlxuXHQ+O1xufTtcblxuLyoqXG4gKiBEYXRhYmFzZSBjb2xsZWN0aW9uIGRlc2NyaXB0b3JcbiAqL1xuZXhwb3J0IHR5cGUgRGF0YWJhc2VDb2xsZWN0aW9uRGVzY3JpcHRvcjxNZXRhZGF0YSwgRGF0YT4gPSB7XG5cdHJlYWRvbmx5IHJlZjogc3RyaW5nO1xuXHRyZWFkb25seSBtYXRjaGVyOiBSZWdFeHA7XG5cdHJlYWRvbmx5IG9uQ3JlYXRlPzogRGF0YWJhc2VEb2N1bWVudEhhbmRsZXI8TWV0YWRhdGEsIERhdGE+O1xuXHRyZWFkb25seSBwZXJtaXNzaW9uPzogRGF0YWJhc2VQZXJtaXNzaW9uSGFuZGxlcjtcbn07XG5cbi8qKlxuICogRGF0YWJhc2UgZG9jdW1lbnQgZGVzY3JpcHRvclxuICovXG5leHBvcnQgdHlwZSBEYXRhYmFzZURvY3VtZW50RGVzY3JpcHRvcjxNZXRhZGF0YSwgRGF0YT4gPSB7XG5cdHJlYWRvbmx5IHJlZjogc3RyaW5nO1xuXHRyZWFkb25seSBtYXRjaGVyOiBSZWdFeHA7XG5cdHJlYWRvbmx5IG9uVXBkYXRlPzogRGF0YWJhc2VEb2N1bWVudENoYW5nZUhhbmRsZXI8TWV0YWRhdGEsIERhdGE+O1xuXHRyZWFkb25seSBvbkRlbGV0ZT86IERhdGFiYXNlRG9jdW1lbnRIYW5kbGVyPE1ldGFkYXRhLCBEYXRhPjtcblx0cmVhZG9ubHkgcGVybWlzc2lvbj86IERhdGFiYXNlUGVybWlzc2lvbkhhbmRsZXI7XG59O1xuXG4vKipcbiAqIERhdGFiYXNlIGJ1aWxkZXJcbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFiYXNlQnVpbGRlciB7XG5cdHByaXZhdGUgY29sbGVjdGlvbnMgPSBuZXcgU2V0PERhdGFiYXNlQ29sbGVjdGlvbkJ1aWxkZXI+KCk7XG5cdHByaXZhdGUgZG9jdW1lbnRzID0gbmV3IFNldDxEYXRhYmFzZURvY3VtZW50QnVpbGRlcj4oKTtcblxuXHQvKipcblx0ICogQnVpbGQgdGhlIGRhdGFiYXNlIGRlc2NyaXB0b3Jcblx0ICovXG5cdHB1YmxpYyBidWlsZCgpOiBEYXRhYmFzZURlc2NyaXB0b3Ige1xuXHRcdHJldHVybiB7XG5cdFx0XHRjb2xsZWN0aW9uczogQXJyYXkuZnJvbSh0aGlzLmNvbGxlY3Rpb25zKS5tYXAoKGIpID0+IGIuYnVpbGQoKSksXG5cdFx0XHRkb2N1bWVudHM6IEFycmF5LmZyb20odGhpcy5kb2N1bWVudHMpLm1hcCgoYikgPT4gYi5idWlsZCgpKSxcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhIGNvbGxlY3Rpb24gZGVzY3JpcHRvclxuXHQgKi9cblx0cHVibGljIGNvbGxlY3Rpb24ocmVmZXJlbmNlOiBzdHJpbmcpIHtcblx0XHRjb25zdCBidWlsZGVyID0gbmV3IERhdGFiYXNlQ29sbGVjdGlvbkJ1aWxkZXIocmVmZXJlbmNlKTtcblx0XHR0aGlzLmNvbGxlY3Rpb25zLmFkZChidWlsZGVyKTtcblx0XHRyZXR1cm4gYnVpbGRlcjtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBkb2N1bWVudCBkZXNjcmlwdG9yXG5cdCAqL1xuXHRwdWJsaWMgZG9jdW1lbnQocmVmZXJlbmNlOiBzdHJpbmcpIHtcblx0XHRjb25zdCBidWlsZGVyID0gbmV3IERhdGFiYXNlRG9jdW1lbnRCdWlsZGVyKHJlZmVyZW5jZSk7XG5cdFx0dGhpcy5kb2N1bWVudHMuYWRkKGJ1aWxkZXIpO1xuXHRcdHJldHVybiBidWlsZGVyO1xuXHR9XG59XG5cbi8qKlxuICogRGF0YWJhc2UgY29sbGVjdGlvbiBkZXNjcmlwdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZUNvbGxlY3Rpb25CdWlsZGVyPE1ldGFkYXRhID0gdW5rbm93biwgRGF0YSA9IHVua25vd24+IHtcblx0cHJpdmF0ZSBvbkNyZWF0ZUhhbmRsZXI/OiBEYXRhYmFzZURvY3VtZW50SGFuZGxlcjxNZXRhZGF0YSwgRGF0YT47XG5cdHByaXZhdGUgcGVybWlzc2lvbkhhbmRsZXI/OiBEYXRhYmFzZVBlcm1pc3Npb25IYW5kbGVyO1xuXG5cdC8qKlxuXHQgKiBDb25zdHJ1Y3QgYSBuZXcgRGF0YWJhc2UgZG9jdW1lbnQgYnVpbGRlclxuXHQgKi9cblx0cHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVmOiBzdHJpbmcpIHt9XG5cblx0LyoqXG5cdCAqIEJ1aWxkIHRoZSBkYXRhYmFzZSBjb2xsZWN0aW9uIGRlc2NyaXB0b3Jcblx0ICovXG5cdHB1YmxpYyBidWlsZCgpOiBEYXRhYmFzZUNvbGxlY3Rpb25EZXNjcmlwdG9yPE1ldGFkYXRhLCBEYXRhPiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlZjogdGhpcy5yZWYsXG5cdFx0XHRtYXRjaGVyOiByZWZUb1JlZ0V4cCh0aGlzLnJlZiksXG5cdFx0XHRvbkNyZWF0ZTogdGhpcy5vbkNyZWF0ZUhhbmRsZXIsXG5cdFx0XHRwZXJtaXNzaW9uOiB0aGlzLnBlcm1pc3Npb25IYW5kbGVyLFxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogU2V0IHRoZSBjcmVhdGUgaGFuZGxlclxuXHQgKi9cblx0cHVibGljIG9uQ3JlYXRlKGhhbmRsZXI6IERhdGFiYXNlRG9jdW1lbnRIYW5kbGVyPHVua25vd24sIHVua25vd24+KSB7XG5cdFx0dGhpcy5vbkNyZWF0ZUhhbmRsZXIgPSBoYW5kbGVyO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB0aGUgc2VjdXJpdHkgcG9saWN5IGhhbmRsZXJcblx0ICovXG5cdHB1YmxpYyBwZXJtaXNzaW9uKGhhbmRsZXI6IERhdGFiYXNlUGVybWlzc2lvbkhhbmRsZXIpIHtcblx0XHR0aGlzLnBlcm1pc3Npb25IYW5kbGVyID0gaGFuZGxlcjtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufVxuXG4vKipcbiAqIERhdGFiYXNlIGRvY3VtZW50IGJ1aWxkZXJcbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFiYXNlRG9jdW1lbnRCdWlsZGVyPE1ldGFkYXRhID0gdW5rbm93biwgRGF0YSA9IHVua25vd24+IHtcblx0cHJpdmF0ZSBvblVwZGF0ZUhhbmRsZXI/OiBEYXRhYmFzZURvY3VtZW50Q2hhbmdlSGFuZGxlcjxNZXRhZGF0YSwgRGF0YT47XG5cdHByaXZhdGUgb25EZWxldGVIYW5kbGVyPzogRGF0YWJhc2VEb2N1bWVudEhhbmRsZXI8TWV0YWRhdGEsIERhdGE+O1xuXHRwcml2YXRlIHBlcm1pc3Npb25IYW5kbGVyPzogRGF0YWJhc2VQZXJtaXNzaW9uSGFuZGxlcjtcblxuXHQvKipcblx0ICogQ29uc3RydWN0IGEgbmV3IERhdGFiYXNlIGRvY3VtZW50IGJ1aWxkZXJcblx0ICovXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlZjogc3RyaW5nKSB7fVxuXG5cdC8qKlxuXHQgKiBCdWlsZCB0aGUgZGF0YWJhc2UgZG9jdW1lbnQgZGVzY3JpcHRvclxuXHQgKi9cblx0cHVibGljIGJ1aWxkKCk6IERhdGFiYXNlRG9jdW1lbnREZXNjcmlwdG9yPE1ldGFkYXRhLCBEYXRhPiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlZjogdGhpcy5yZWYsXG5cdFx0XHRtYXRjaGVyOiByZWZUb1JlZ0V4cCh0aGlzLnJlZiksXG5cdFx0XHRvblVwZGF0ZTogdGhpcy5vblVwZGF0ZUhhbmRsZXIsXG5cdFx0XHRvbkRlbGV0ZTogdGhpcy5vbkRlbGV0ZUhhbmRsZXIsXG5cdFx0XHRwZXJtaXNzaW9uOiB0aGlzLnBlcm1pc3Npb25IYW5kbGVyLFxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogU2V0IHRoZSB1cGRhdGUgaGFuZGxlclxuXHQgKi9cblx0cHVibGljIG9uVXBkYXRlKGhhbmRsZXI6IERhdGFiYXNlRG9jdW1lbnRDaGFuZ2VIYW5kbGVyPE1ldGFkYXRhLCBEYXRhPikge1xuXHRcdHRoaXMub25VcGRhdGVIYW5kbGVyID0gaGFuZGxlcjtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBTZXQgdGhlIHVwZGF0ZSBoYW5kbGVyXG5cdCAqL1xuXHRwdWJsaWMgb25EZWxldGUoaGFuZGxlcjogRGF0YWJhc2VEb2N1bWVudEhhbmRsZXI8TWV0YWRhdGEsIERhdGE+KSB7XG5cdFx0dGhpcy5vbkRlbGV0ZUhhbmRsZXIgPSBoYW5kbGVyO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB0aGUgc2VjdXJpdHkgcG9saWN5IGhhbmRsZXJcblx0ICovXG5cdHB1YmxpYyBwZXJtaXNzaW9uKGhhbmRsZXI6IERhdGFiYXNlUGVybWlzc2lvbkhhbmRsZXIpIHtcblx0XHR0aGlzLnBlcm1pc3Npb25IYW5kbGVyID0gaGFuZGxlcjtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufVxuXG5leHBvcnQgY29uc3QgZGF0YWJhc2UgPSBuZXcgRGF0YWJhc2VCdWlsZGVyKCk7XG4iXX0=
